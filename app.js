!function(){"use strict";angular.module("app",["ngAnimate","ui.router","uiGmapgoogle-maps","firebase"])}(),function(){"use strict";function t(){var t=function(){return{serverUrl:"https://bandally.firebaseio.com/"}};return new t}angular.module("app").factory("config",t),t.$inject=[]}(),function(){"use strict";function t(t,e){e.otherwise("/"),t.state("home",{url:"/",controller:"HomeController",controllerAs:"home",templateUrl:"partials/home.html",resolve:{currentAuth:["auth",function(t){return t.$requireAuth()}]}}).state("login",{url:"/login",controller:"LoginController",controllerAs:"login",templateUrl:"partials/login.html",resolve:{currentAuth:["auth",function(t){return t.$waitForAuth()}]}}).state("tickets",{url:"/tickets",controller:"TicketsController",controllerAs:"tickets",templateUrl:"partials/tickets.html",resolve:{currentAuth:["auth",function(t){return t.$requireAuth()}]}}).state("tickets.add",{url:"/add",views:{"@":{controller:"TicketsAddController",controllerAs:"ticketsAdd",templateUrl:"partials/tickets-add.html"}},resolve:{currentAuth:["auth",function(t){return t.$requireAuth()}]}}).state("spots",{url:"/spots",controller:"SpotsController",controllerAs:"spots",templateUrl:"partials/spots.html",resolve:{currentAuth:["auth",function(t){return t.$requireAuth()}]}}).state("account",{url:"/account",controller:"AccountController",controllerAs:"account",templateUrl:"partials/account.html",resolve:{currentAuth:["auth",function(t){return t.$requireAuth()}]}})}angular.module("app").config(t),t.$inject=["$stateProvider","$urlRouterProvider"]}(),function(){"use strict";function t(t,e){t.$on("$stateChangeSuccess",function(e,n,r,o,a,u){t.pageName=n.controllerAs}),t.$on("$stateChangeError",function(t,n,r,o,a,u){"AUTH_REQUIRED"===u&&e.go("login")})}angular.module("app").run(t),t.$inject=["$rootScope","$state"]}(),function(){"use strict";function t(t,e){function n(){}var r=this;r.me=t,n()}angular.module("app").controller("AccountController",t),t.$inject=["currentAuth","user"]}(),function(){"use strict";function t(t){function e(){}var n=this;n.me=t,e()}angular.module("app").controller("HomeController",t),t.$inject=["currentAuth"]}(),function(){"use strict";function t(t,e,n,r,o){function a(){r&&t.go("home")}function u(){var t=["public_profile","email"];n.$authWithOAuthPopup("facebook",{scope:t.join()}).then(i)["catch"](c)}function i(t){console.log("Logged in as:",t.uid),g=t,e.save(g).then(l,s)}function c(t){console.log("Authentication failed:",t)}function l(t){var e=t.key(),n={name:g.facebook.email.split("@")[0],fullName:g.facebook.displayName,email:g.facebook.email,gender:g.facebook.cachedUserProfile.gender,imageUrl:g.facebook.profileImageURL,accountIds:[e],languageIds:null,message:null};o.save(n).then(f,d)}function s(t){console.log(t)}function f(e){t.go("home")}function d(t){console.log(t)}function p(){var t={email:h.mailAddress,password:h.password};n.$createUser(t).then(function(e){return console.log("User "+e.uid+" created successfully!"),n.$authWithPassword(t)}).then(function(t){console.log("Logged in as:",t.uid)})["catch"](function(t){console.error("Error: ",t)})}var g={},h=this;h.fbLogin=u,h.mailLogin=p,h.users=o.getAll(),a()}angular.module("app").controller("LoginController",t),t.$inject=["$state","account","auth","currentAuth","user"]}(),function(){"use strict";function t(t){function e(){n.map={center:{latitude:35.457624,longitude:139.633337},zoom:16},n.markers=[{id:1,latitude:35.459923,longitude:139.63529,name:"パシフィコ横浜",photos:[{url:"https://upload.wikimedia.org/wikipedia/commons/c/c1/MinatoMirai21.jpg"}]},{id:2,latitude:35.457511,longitude:139.632704,name:"みなとみらい駅",photos:[{url:"https://upload.wikimedia.org/wikipedia/commons/6/6d/Pacifico_Yokohama_2012.JPG"}]},{id:"-K2wcXJywEnxfqTPLZ9J",name:"カップヌードルミュージアム 安藤百福発明記念館",latitude:35.4554834,longitude:139.6366649,photos:[{id:"PHOTO_ID",url:"http://robotic-person.c.blog.so-net.ne.jp/_images/blog/_40d/robotic-person/DSCF0079-20111014a.jpg?c=a1"}]}]}var n=this;n.me=t,n.map={},n.markers=[],e()}angular.module("app").controller("SpotsController",t),t.$inject=["currentAuth"]}(),function(){"use strict";function t(t,e){function n(){}function r(){e.$add({departureDate:o.departureDate,arrivedDate:o.arrivedDate,destination:o.destination,languages:o.languages,message:o.message}).then(function(){t.go("tickets")})}var o=this;o.add=r,n()}angular.module("app").controller("TicketsAddController",t),t.$inject=["$state","ticket"]}(),function(){"use strict";function t(t){function e(){n.tickets=t}var n=this;n.tickets=[],e()}angular.module("app").controller("TicketsController",t),t.$inject=["ticket"]}(),function(){"use strict";function t(){return{templateUrl:"partials/header.html",scope:{},controller:e,controllerAs:"header",bindToController:!0}}function e(t,e){function n(){e.$onAuth(function(t){o.auth=t})}function r(){confirm("ログアウトします")&&(e.$unauth(),t.go("login"))}var o=this;o.auth={},o.logout=r,n()}angular.module("app").directive("header",t),t.$inject=[],e.$inject=["$state","auth"]}(),function(){"use strict";function t(t,e,n){function r(){var r=new Firebase(n.serverUrl+"accounts");return{getAll:function(){return t(r)},add:function(e){return t(r).$add(e)},save:function(t){var n=r.child(t.uid),o=e(n);return o=angular.merge(o,t),o.$save()}}}return new r}angular.module("app").factory("account",t),t.$inject=["$firebaseArray","$firebaseObject","config"]}(),function(){"use strict";function t(t,e){var n=new Firebase(e.serverUrl);return t(n)}angular.module("app").factory("auth",t),t.$inject=["$firebaseAuth","config"]}(),function(){"use strict";function t(t,e){var n=new Firebase(e.serverUrl+"tickets");return t(n)}angular.module("app").factory("ticket",t),t.$inject=["$firebaseArray","config"]}(),function(){"use strict";function t(t,e,n){function r(){var r=new Firebase(n.serverUrl+"users");return{getAll:function(){return t(r)},add:function(e){return t(r).$add(e)},save:function(t){var n=r.child(t.name),o=e(n);return o=angular.merge(o,t),o.$save()}}}return new r}angular.module("app").factory("user",t),t.$inject=["$firebaseArray","$firebaseObject","config"]}();
//# sourceMappingURL=app.js.map
