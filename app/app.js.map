{"version":3,"sources":["app.module.js","core.module.js","account/account.controller.js","account/account.module.js","account/account.route.js","core/account.service.js","core/auth.service.js","core/core.config.js","core/core.route.js","core/core.run.js","core/photo.service.js","core/ticket.service.js","core/user.service.js","home/home.controller.js","home/home.module.js","home/home.route.js","hosts/hosts.controller.js","hosts/hosts.module.js","hosts/hosts.route.js","layout/header.directive.js","layout/layout.module.js","login/login.controller.js","login/login.module.js","login/login.route.js","spots/spots.controller.js","spots/spots.module.js","spots/spots.route.js","tickets/tickets-add.controller.js","tickets/tickets.controller.js","tickets/tickets.module.js","tickets/tickets.route.js"],"names":["angular","module","AccountController","currentAuth","user","activate","vm","this","me","controller","$inject","route","$stateProvider","state","url","controllerAs","templateUrl","resolve","auth","$requireAuth","config","account","$firebaseArray","$firebaseObject","Account","ref","Firebase","serverUrl","getAll","add","data","$add","save","newAccountRef","child","uid","newAccount","merge","$save","factory","$firebaseAuth","Config","$urlRouterProvider","otherwise","run","$rootScope","$state","$on","event","toState","toParams","fromState","fromParams","error","pageName","go","photo","Photo","newPhotoRef","newPhoto","ticket","User","newUserRef","name","newUser","HomeController","HostsController","images","header","scope","HeaderController","bindToController","$onAuth","authData","logout","confirm","$unauth","directive","LoginController","fbLogin","$authWithOAuthPopup","join","then","fbLoginSuccess","fbLoginError","console","log","_authData","accountSaveSuccess","accountSaveError","accountId","key","userData","facebook","email","split","fullName","displayName","gender","cachedUserProfile","imageUrl","profileImageURL","accountIds","languageIds","message","userSaveSuccess","userSaveError","mailLogin","inputData","mailAddress","password","$createUser","$authWithPassword","users","$waitForAuth","SpotsController","map","center","latitude","longitude","zoom","markers","id","photos","TicketsAddController","departureDate","arrivedDate","destination","languages","TicketsController","tickets","views","@"],"mappings":"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","file":"app.js","sourcesContent":["(function () {\n  'use strict';\n\n  angular.module('app', [\n    'ngAnimate',\n    'angular-carousel',\n    'ui.router',\n    'uiGmapgoogle-maps',\n    'firebase',\n    'app.layout',\n    'app.home',\n    'app.login',\n    'app.spots',\n    'app.tickets',\n    'app.account',\n    'app.hosts',\n    'app.core'\n  ]);\n})();\n","(function () {\n  'use strict';\n\n  angular.module('app.core', []);\n})();\n","(function () {\n  'use strict';\n\n  angular.module('app').controller('AccountController', AccountController);\n\n  AccountController.$inject = ['currentAuth', 'user'];\n\n  function AccountController(currentAuth, user) {\n\n    var vm = this;\n    vm.me = currentAuth;\n\n    activate();\n\n    function activate() {\n      // user.add({\n      //   name: 'yosket87',\n      //   fullName: 'Yosuke Tanaka',\n      //   gender: 1,\n      //   imageUrl: 'https://scontent.xx.fbcdn.net/hprofile-xpa1/v/t1.0-1/s100x100/166494_166271906752589_121321_n.jpg?oh=6c157593b77c3fb3f8fa28d272e9448d&oe=56F75B0B',\n      //   accountIds: ['-K3SXjKUrHG9kZRbNvn-'],\n      //   languageIds: [1],\n      //   message: 'message message message message message message message '\n      // })\n    }\n  }\n})();\n","(function () {\n  'use strict';\n\n  angular.module('app.account', []);\n})();\n","(function () {\n  'use strict';\n\n  angular.module('app.account').config(route);\n\n  route.$inject = ['$stateProvider'];\n\n  function route($stateProvider) {\n    $stateProvider\n      .state('account', {\n        url: '/account',\n        controller: 'AccountController',\n        controllerAs: 'account',\n        templateUrl: 'app/account/account.html',\n        resolve: {\n          currentAuth: ['auth', function(auth) {\n            return auth.$requireAuth();\n          }]\n        }\n      });\n  }\n})();\n","(function () {\n  'use strict';\n\n  angular.module('app.core').factory('account', account);\n\n  account.$inject = ['$firebaseArray', '$firebaseObject', 'config'];\n\n  function account($firebaseArray, $firebaseObject, config) {\n\n    return new Account();\n\n    function Account() {\n      var ref = new Firebase(config.serverUrl + 'accounts');\n      return {\n        getAll: function () {\n          return $firebaseArray(ref);\n        },\n        add: function (data) {\n          return $firebaseArray(ref).$add(data);\n        },\n        save: function (data) {\n          var newAccountRef = ref.child(data.uid);\n          var newAccount = $firebaseObject(newAccountRef);\n          newAccount = angular.merge(newAccount, data);\n          return newAccount.$save();\n        }\n      };\n    }\n  }\n})();\n","(function () {\n  'use strict';\n\n  angular.module('app.core').factory('auth', auth);\n\n  auth.$inject = ['$firebaseAuth', 'config'];\n\n  function auth($firebaseAuth, config) {\n    var ref = new Firebase(config.serverUrl);\n    return $firebaseAuth(ref);\n  }\n})();\n","(function () {\n  'use strict';\n\n  angular.module('app.core').factory('config', config);\n\n  config.$inject = [];\n\n  function config() {\n    var Config = function () {\n      return {\n        'serverUrl': 'https://bandally.firebaseio.com/'\n      };\n    };\n    return new Config();\n  }\n})();\n","(function () {\n  'use strict';\n\n  angular.module('app.core').config(route);\n\n  route.$inject = ['$urlRouterProvider'];\n\n  function route($urlRouterProvider) {\n    $urlRouterProvider.otherwise('/');\n  }\n})();\n","(function () {\n  'use strict';\n\n  angular.module('app.core').run(run);\n\n  run.$inject = ['$rootScope', '$state'];\n\n  function run($rootScope, $state) {\n    $rootScope.$on('$stateChangeSuccess', function (event, toState, toParams, fromState, fromParams, error) {\n      $rootScope.pageName = toState.controllerAs;\n    });\n    $rootScope.$on('$stateChangeError', function (event, toState, toParams, fromState, fromParams, error) {\n      if (error === 'AUTH_REQUIRED') {\n        $state.go('login');\n      }\n    });\n  }\n})();\n","(function () {\n  'use strict';\n\n  angular.module('app.core').factory('photo', photo);\n\n  photo.$inject = ['$firebaseArray', '$firebaseObject', 'config'];\n\n  function photo($firebaseArray, $firebaseObject, config) {\n\n    return new Photo();\n\n    function Photo() {\n      var ref = new Firebase(config.serverUrl + 'photos');\n      return {\n        getAll: function () {\n          return $firebaseArray(ref);\n        },\n        add: function (data) {\n          return $firebaseArray(ref).$add(data);\n        },\n        save: function (data) {\n          var newPhotoRef = ref.child(data.uid);\n          var Photo = $firebaseObject(newPhotoRef);\n          newPhoto = angular.merge(newPhoto, data);\n          return newPhoto.$save();\n        }\n      };\n    }\n  }\n})();\n","(function () {\n  'use strict';\n\n  angular.module('app.core').factory('ticket', ticket);\n\n  ticket.$inject = ['$firebaseArray', 'config'];\n\n  function ticket($firebaseArray, config) {\n    var ref = new Firebase(config.serverUrl + 'tickets');\n    return $firebaseArray(ref);\n  }\n})();\n","(function () {\n  'use strict';\n\n  angular.module('app.core').factory('user', user);\n\n  user.$inject = ['$firebaseArray', '$firebaseObject', 'config'];\n\n  function user($firebaseArray, $firebaseObject, config) {\n\n    return new User();\n\n    function User() {\n      var ref = new Firebase(config.serverUrl + 'users');\n      return {\n        getAll: function () {\n          return $firebaseArray(ref);\n        },\n        add: function (data) {\n          return $firebaseArray(ref).$add(data);\n        },\n        save: function (data) {\n          var newUserRef = ref.child(data.name);\n          var newUser = $firebaseObject(newUserRef);\n          newUser = angular.merge(newUser, data);\n          return newUser.$save();\n        }\n      };\n    }\n  }\n})();\n","(function () {\n  'use strict';\n\n  angular.module('app').controller('HomeController', HomeController);\n\n  HomeController.$inject = ['currentAuth'];\n\n  function HomeController(currentAuth) {\n\n    var vm = this;\n    vm.me = currentAuth;\n\n    activate();\n\n    function activate() {}\n  }\n})();\n","(function () {\n  'use strict';\n\n  angular.module('app.home', []);\n})();\n","(function () {\n  'use strict';\n\n  angular.module('app.home').config(route);\n\n  route.$inject = ['$stateProvider'];\n\n  function route($stateProvider) {\n    $stateProvider\n      .state('home', {\n        url: '/',\n        controller: 'HomeController',\n        controllerAs: 'home',\n        templateUrl: 'app/home/home.html',\n        resolve: {\n          currentAuth: ['auth', function(auth) {\n            return auth.$requireAuth();\n          }]\n        }\n      });\n  }\n})();\n","(function () {\n  'use strict';\n\n  angular.module('app').controller('HostsController', HostsController);\n\n  HostsController.$inject = ['currentAuth', 'photo'];\n\n  function HostsController(currentAuth, photo) {\n\n    var vm = this;\n    vm.me = currentAuth;\n\n    activate();\n\n    function activate() {\n      vm.images = photo.getAll();\n    }\n  }\n})();\n","(function () {\n  'use strict';\n\n  angular.module('app.hosts', []);\n})();\n","(function () {\n  'use strict';\n\n  angular.module('app.hosts').config(route);\n\n  route.$inject = ['$stateProvider'];\n\n  function route($stateProvider) {\n    $stateProvider\n      .state('hosts', {\n        url: '/:userId',\n        controller: 'HostsController',\n        controllerAs: 'hosts',\n        templateUrl: 'app/hosts/hosts.html',\n        resolve: {\n          currentAuth: ['auth', function(auth) {\n            return auth.$requireAuth();\n          }]\n        }\n      });\n  }\n})();\n","(function () {\n  'use strict';\n\n  angular.module('app').directive('header', header);\n\n  header.$inject = [];\n\n  function header() {\n    return {\n      templateUrl: 'app/layout/header.html',\n      scope: {},\n      controller: HeaderController,\n      controllerAs: 'header',\n      bindToController: true\n    };\n  }\n\n  HeaderController.$inject = ['$state', 'auth'];\n\n  function HeaderController($state, auth) {\n\n    var vm = this;\n    vm.auth = {};\n    vm.logout = logout;\n\n    activate();\n\n    function activate() {\n      auth.$onAuth(function (authData) {\n        vm.auth = authData;\n      });\n    }\n\n    function logout() {\n      if (!confirm('ログアウトします')) {\n        return;\n      }\n      auth.$unauth();\n      $state.go('login');\n    }\n  }\n})();\n","(function() {\n  'use strict';\n\n  angular.module('app.layout', []);\n})();\n","(function () {\n  'use strict';\n\n  angular.module('app').controller('LoginController', LoginController);\n\n  LoginController.$inject = ['$state', 'account', 'auth', 'currentAuth', 'user'];\n\n  function LoginController($state, account, auth, currentAuth, user) {\n\n    var _authData = {};\n\n    var vm = this;\n    vm.fbLogin = fbLogin;\n    vm.mailLogin = mailLogin;\n    vm.users = user.getAll();\n\n    activate();\n\n    function activate() {\n      if (currentAuth) {\n        $state.go('home');\n      }\n    }\n\n    function fbLogin() {\n      var scope = ['public_profile', 'email'];\n      auth.$authWithOAuthPopup('facebook', {\n        scope: scope.join()\n      }).then(fbLoginSuccess).catch(fbLoginError);\n    }\n\n    function fbLoginSuccess(authData) {\n      console.log('Logged in as:', authData.uid);\n      _authData = authData;\n      account.save(_authData).then(accountSaveSuccess, accountSaveError);\n    }\n\n    function fbLoginError(error) {\n      console.log('Authentication failed:', error);\n    }\n\n    function accountSaveSuccess(ref) {\n      var accountId = ref.key();\n      var userData = {\n        name: _authData.facebook.email.split('@')[0],\n        fullName: _authData.facebook.displayName,\n        email: _authData.facebook.email,\n        gender: _authData.facebook.cachedUserProfile.gender,\n        imageUrl: _authData.facebook.profileImageURL,\n        accountIds: [accountId],\n        languageIds: null,\n        message: null\n      };\n      user.save(userData).then(userSaveSuccess, userSaveError);\n    }\n\n    function accountSaveError(error) {\n      console.log(error);\n    }\n\n    function userSaveSuccess(ref) {\n      $state.go('home');\n    }\n\n    function userSaveError(error) {\n      console.log(error);\n    }\n\n    function mailLogin() {\n      var inputData = {\n        email   : vm.mailAddress,\n        password: vm.password\n      };\n\n      auth.$createUser(inputData).then(function (userData) {\n        console.log(\"User \" + userData.uid + \" created successfully!\");\n        return auth.$authWithPassword(inputData);\n      }).then(function (authData) {\n        console.log(\"Logged in as:\", authData.uid);\n      }).catch(function (error) {\n        console.error(\"Error: \", error);\n      });\n      return;\n\n      // auth.$authWithPassword(inputData).then(function (authData) {\n      //   console.log(\"Logged in as:\", authData.uid);\n      //   $state.go('home');\n      // }).catch(function (error) {\n      //   if (error) {\n      //     auth.$createUser(inputData).then(function (userData) {\n      //       console.log(\"User \" + userData.uid + \" created successfully!\");\n      //       return auth.$authWithPassword(inputData);\n      //     }).then(function (authData) {\n      //       console.log(\"Logged in as:\", authData.uid);\n      //     }).catch(function (error) {\n      //       console.error(\"Error: \", error);\n      //     });\n      //   }\n      // });\n    }\n  }\n})();\n","(function () {\n  'use strict';\n\n  angular.module('app.login', []);\n})();\n","(function () {\n  'use strict';\n\n  angular.module('app.login').config(route);\n\n  route.$inject = ['$stateProvider'];\n\n  function route($stateProvider) {\n    $stateProvider\n      .state('login', {\n        url: '/login',\n        controller: 'LoginController',\n        controllerAs: 'login',\n        templateUrl: 'app/login/login.html',\n        resolve: {\n          currentAuth: ['auth', function(auth) {\n            return auth.$waitForAuth();\n          }]\n        }\n      });\n  }\n})();\n","(function () {\n  'use strict';\n\n  angular.module('app').controller('SpotsController', SpotsController);\n\n  SpotsController.$inject = ['currentAuth'];\n\n  function SpotsController(currentAuth) {\n\n    var vm = this;\n    vm.me = currentAuth;\n    vm.map = {};\n    vm.markers = [];\n\n    activate();\n\n    function activate() {\n      vm.map = {\n        center: {\n          latitude: 35.457624,\n          longitude: 139.633337\n        },\n        zoom: 16\n      };\n      vm.markers = [\n        {\n          \"id\":1,\n          \"latitude\":35.459923,\n          \"longitude\":139.635290,\n          \"name\":\"パシフィコ横浜\",\n          'photos': [\n            {\n              'url': 'https://upload.wikimedia.org/wikipedia/commons/c/c1/MinatoMirai21.jpg'\n            }\n          ]\n        },\n        {\n          \"id\":2,\n          \"latitude\":35.457511,\n          \"longitude\":139.632704,\n          \"name\":\"みなとみらい駅\",\n          'photos': [\n            {\n              'url': 'https://upload.wikimedia.org/wikipedia/commons/6/6d/Pacifico_Yokohama_2012.JPG'\n            }\n          ]\n        },\n        {\n          \"id\": '-K2wcXJywEnxfqTPLZ9J',\n          \"name\": 'カップヌードルミュージアム 安藤百福発明記念館',\n          \"latitude\": 35.4554834,\n          \"longitude\": 139.6366649,\n          \"photos\": [\n            {\n              \"id\": 'PHOTO_ID',\n              \"url\": 'http://robotic-person.c.blog.so-net.ne.jp/_images/blog/_40d/robotic-person/DSCF0079-20111014a.jpg?c=a1'\n            }\n          ]\n        }\n      ];\n    }\n  }\n})();\n","(function () {\n  'use strict';\n\n  angular.module('app.spots', []);\n})();\n","(function () {\n  'use strict';\n\n  angular.module('app.spots').config(route);\n\n  route.$inject = ['$stateProvider'];\n\n  function route($stateProvider) {\n    $stateProvider\n      .state('spots', {\n        url: '/spots',\n        controller: 'SpotsController',\n        controllerAs: 'spots',\n        templateUrl: 'app/spots/spots.html',\n        resolve: {\n          currentAuth: ['auth', function(auth) {\n            return auth.$requireAuth();\n          }]\n        }\n      });\n  }\n})();\n","(function () {\n  'use strict';\n\n  angular.module('app').controller('TicketsAddController', TicketsAddController);\n\n  TicketsAddController.$inject = ['$state', 'ticket'];\n\n  function TicketsAddController($state, ticket) {\n    var vm = this;\n    vm.add = add;\n\n    activate();\n\n    function activate() {}\n\n    function add() {\n      ticket.$add({\n        departureDate: vm.departureDate,\n        arrivedDate: vm.arrivedDate,\n        destination: vm.destination,\n        languages: vm.languages,\n        message: vm.message\n      }).then(function () {\n        $state.go('tickets');\n      });\n    }\n  }\n})();\n","(function () {\n  'use strict';\n\n  angular.module('app').controller('TicketsController', TicketsController);\n\n  TicketsController.$inject = ['ticket'];\n\n  function TicketsController(ticket) {\n    var vm = this;\n    vm.tickets = [];\n\n    activate();\n\n    function activate() {\n      vm.tickets = ticket;\n    }\n  }\n})();\n","(function () {\n  'use strict';\n\n  angular.module('app.tickets', []);\n})();\n","(function () {\n  'use strict';\n\n  angular.module('app.tickets').config(route);\n\n  route.$inject = ['$stateProvider'];\n\n  function route($stateProvider) {\n    $stateProvider\n      .state('tickets', {\n        url: '/tickets',\n        controller: 'TicketsController',\n        controllerAs: 'tickets',\n        templateUrl: 'app/tickets/tickets.html',\n        resolve: {\n          currentAuth: ['auth', function(auth) {\n            return auth.$requireAuth();\n          }]\n        }\n      })\n      .state('tickets.add', {\n        url: '/add',\n        views: {\n          \"@\": {\n            controller: 'TicketsAddController',\n            controllerAs: 'ticketsAdd',\n            templateUrl: 'app/tickets/tickets-add.html'\n          }\n        },\n        resolve: {\n          currentAuth: ['auth', function(auth) {\n            return auth.$requireAuth();\n          }]\n        }\n      });\n  }\n})();\n"],"sourceRoot":"/source/"}